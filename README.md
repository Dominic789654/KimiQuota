# Kimi Coding Plan ä½™é‡æŸ¥è¯¢å·¥å…·

ä¸€å¥—å®Œæ•´çš„å·¥å…·ï¼Œç”¨äºæŸ¥çœ‹ Kimi Code CLI çš„ä½¿ç”¨é‡ä½™é‡ã€‚åŒ…å«å‘½ä»¤è¡Œè„šæœ¬å’Œ macOS èœå•æ åº”ç”¨ã€‚

---

## ğŸ“¦ åŒ…å«å†…å®¹

```
coding-plan-checker/
â”œâ”€â”€ kimi_quota.py                  # å‘½ä»¤è¡Œç‰ˆæœ¬
â”œâ”€â”€ KimiQuotaMenuBar.app/          # macOS èœå•æ åº”ç”¨
â”‚   â””â”€â”€ Contents/MacOS/
â”‚       â””â”€â”€ kimi_menu.py
â”œâ”€â”€ homebrew-tap/                  # Homebrew æ”¯æŒ
â”‚   â”œâ”€â”€ Formula/kimiquota.rb
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ install.sh                     # ä¸€é”®å®‰è£…è„šæœ¬
â”œâ”€â”€ install-brew.sh                # Homebrew é£æ ¼å®‰è£… â­
â”œâ”€â”€ run.sh                         # å¿«é€Ÿå¯åŠ¨è„šæœ¬
â”œâ”€â”€ setup.py                       # æ‰“åŒ…è„šæœ¬
â””â”€â”€ README.md                      # æœ¬æ–‡æ¡£
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€: Homebrew å®‰è£… (æ¨è â­â­â­)

```bash
# å…‹éš†ä»“åº“
git clone <repository-url>
cd coding-plan-checker

# ä¸€é”®å®‰è£… (Homebrew é£æ ¼)
./install-brew.sh
```

å®‰è£…å®Œæˆåï¼Œä½ å°†è·å¾—:
- `kimiquota` - å¯åŠ¨èœå•æ åº”ç”¨
- `kimiquota-cli` - å‘½ä»¤è¡Œå·¥å…·
- `/Applications/KimiQuota.app` - ç‹¬ç«‹åº”ç”¨

### æ–¹å¼äºŒ: æ‰‹åŠ¨å®‰è£…

```bash
# å®‰è£…ä¾èµ–
pip install requests rumps

# å¯åŠ¨èœå•æ åº”ç”¨
./run.sh
```

---

## ğŸº Homebrew é£æ ¼å®‰è£…è¯¦è§£

### ä½¿ç”¨ `install-brew.sh` è„šæœ¬

```bash
./install-brew.sh
```

æ­¤è„šæœ¬ä¼š:
1. âœ… æ£€æŸ¥ Homebrew å’Œ Python ç¯å¢ƒ
2. âœ… åˆ›å»ºéš”ç¦»çš„ Python è™šæ‹Ÿç¯å¢ƒ
3. âœ… å®‰è£…æ‰€æœ‰ä¾èµ– (rumps, requests)
4. âœ… åˆ›å»º `kimiquota` å’Œ `kimiquota-cli` å‘½ä»¤
5. âœ… åˆ›å»º `/Applications/KimiQuota.app`

### å®‰è£…åçš„ä½¿ç”¨

```bash
# å¯åŠ¨èœå•æ åº”ç”¨
kimiquota

# æˆ–ä½¿ç”¨åº”ç”¨
open /Applications/KimiQuota.app

# å‘½ä»¤è¡Œå·¥å…·
kimiquota-cli
kimiquota-cli --json
```

### å¸è½½

```bash
rm -rf $(brew --prefix)/opt/kimiquota
rm $(brew --prefix)/bin/kimiquota
rm $(brew --prefix)/bin/kimiquota-cli
rm -rf /Applications/KimiQuota.app
```

---

## ğŸ macOS èœå•æ åº”ç”¨

### å¿«é€Ÿå¯åŠ¨

```bash
# æ–¹å¼ä¸€: ä½¿ç”¨å¯åŠ¨è„šæœ¬ (å¼€å‘/æµ‹è¯•)
./run.sh

# æ–¹å¼äºŒ: ç›´æ¥è¿è¡Œ
python KimiQuotaMenuBar.app/Contents/MacOS/kimi_menu.py

# æ–¹å¼ä¸‰: Homebrew å®‰è£…å
kimiquota
```

### èœå•æ åº”ç”¨åŠŸèƒ½

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| ğŸŸ¢ğŸŸ¡ğŸ”´ çŠ¶æ€å›¾æ ‡ | æ ¹æ®ä½™é‡æ˜¾ç¤ºä¸åŒé¢œè‰²ï¼ˆç»¿/é»„/çº¢ï¼‰|
| å®æ—¶æ˜¾ç¤º | èœå•æ æ˜¾ç¤ºå½“å‰å‰©ä½™é¢åº¦ |
| è‡ªåŠ¨åˆ·æ–° | æ¯ 5 åˆ†é’Ÿè‡ªåŠ¨æ›´æ–°æ•°æ® |
| æ‰‹åŠ¨åˆ·æ–° | ç‚¹å‡»èœå•ä¸­çš„"ç«‹å³åˆ·æ–°" |
| è¯¦ç»†èœå• | ç‚¹å‡»å›¾æ ‡æŸ¥çœ‹è¯¦ç»†ä½¿ç”¨ä¿¡æ¯ |
| é‡ç½®æé†’ | æ˜¾ç¤ºé¢åº¦é‡ç½®æ—¶é—´ |

### èœå•æ æ˜¾ç¤ºæ¨¡å¼

```bash
# é»˜è®¤æ¨¡å¼ï¼šå›¾æ ‡ + æ•°å­—
kimiquota

# ä»…æ˜¾ç¤ºæ•°å­—ï¼ˆèŠ‚çœç©ºé—´ï¼‰
python KimiQuotaMenuBar.app/Contents/MacOS/kimi_menu.py --hide-icon
```

---

## ğŸ’» å‘½ä»¤è¡Œç‰ˆæœ¬

### åŸºæœ¬ç”¨æ³•

```bash
# ç›´æ¥è¿è¡Œ
python kimi_quota.py

# JSON æ ¼å¼è¾“å‡º
python kimi_quota.py --json

# ç¦ç”¨é¢œè‰²
python kimi_quota.py --no-color

# Homebrew å®‰è£…å
kimiquota-cli
kimiquota-cli --json
```

---

## ğŸ“‹ ç¤ºä¾‹è¾“å‡º

### å‘½ä»¤è¡Œç‰ˆæœ¬

```
============================================================
                 ğŸŒ™ Kimi Coding Plan ä½™é‡æŸ¥è¯¢                  
============================================================

ğŸ“Š Weekly limit:
  [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘]
  å·²ç”¨: 17 / é™é¢: 100  |  5å¤©3å°æ—¶åé‡ç½®
  å‰©ä½™: 83 (83.0%)

ğŸ“‹ è¯¦ç»†é™åˆ¶:

  â€¢ 5h limit:
      [â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘]
      å·²ç”¨: 5 / é™é¢: 100  |  56åˆ†é’Ÿåé‡ç½®
      å‰©ä½™: 95 (95.0%)

============================================================
```

### èœå•æ åº”ç”¨

èœå•æ æ˜¾ç¤º: `ğŸŸ¢ 83`

ç‚¹å‡»åèœå•å†…å®¹ï¼š
```
ğŸŸ¢ çŠ¶æ€: å……è¶³
ğŸ’š å‰©ä½™: 83 / 100
ğŸ“Š å·²ç”¨: 17 (17%)
â° 5å¤©3å°æ—¶åé‡ç½®
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”„ ç«‹å³åˆ·æ–°
âœ… è‡ªåŠ¨åˆ·æ–°
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸŒ™ æ‰“å¼€ Kimi Code
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ‘‹ é€€å‡º
```

---

## âš™ï¸ è®¾ç½®å¼€æœºå¯åŠ¨

### Homebrew å®‰è£…ç‰ˆæœ¬

```bash
# æ–¹å¼1: ç³»ç»Ÿè®¾ç½®
# ç³»ç»Ÿè®¾ç½® â†’ é€šç”¨ â†’ ç™»å½•é¡¹ â†’ æ·»åŠ  KimiQuota.app

# æ–¹å¼2: å‘½ä»¤è¡Œ
osascript -e 'tell application "System Events" to make login item at end with properties {path:"/Applications/KimiQuota.app", hidden:false}'
```

### æ‰‹åŠ¨æ‰“åŒ…ç‰ˆæœ¬

1. æ‰“åŒ…åº”ç”¨: `python setup.py py2app`
2. å¤åˆ¶åˆ°åº”ç”¨æ–‡ä»¶å¤¹: `cp -r dist/KimiQuota.app /Applications/`
3. æ‰“å¼€ **ç³»ç»Ÿè®¾ç½®** â†’ **é€šç”¨** â†’ **ç™»å½•é¡¹**
4. ç‚¹å‡» **+** æŒ‰é’®ï¼Œé€‰æ‹© `/Applications/KimiQuota.app`

---

## ğŸ”§ å·¥ä½œåŸç†

è„šæœ¬é€šè¿‡ä»¥ä¸‹æ­¥éª¤è·å–ä½™é‡ä¿¡æ¯ï¼š

1. ä» `~/.kimi/credentials/kimi-code.json` è¯»å– OAuth access token
2. è°ƒç”¨ Kimi API: `https://api.kimi.com/coding/v1/usages`
3. è§£æå¹¶å±•ç¤ºè¿”å›çš„æ•°æ®

---

## âš ï¸ æ³¨æ„äº‹é¡¹

- éœ€è¦å…ˆé€šè¿‡ `kimi login` ç™»å½•ï¼Œè„šæœ¬æ‰èƒ½è·å–åˆ°æœ‰æ•ˆçš„ access token
- å¦‚æœ token è¿‡æœŸï¼Œéœ€è¦é‡æ–°è¿è¡Œ `kimi login`
- èœå•æ åº”ç”¨éœ€è¦ Python 3 å’Œ rumps åº“

---

## ğŸ“ ä¾èµ–

- Python 3.8+
- `requests` - HTTP è¯·æ±‚
- `rumps` - macOS èœå•æ åº”ç”¨æ¡†æ¶ï¼ˆä»…èœå•æ ç‰ˆæœ¬éœ€è¦ï¼‰

---

## ğŸ“„ è®¸å¯è¯

MIT
